version: '3'
services:
  db:
    image: postgres:9.6
    ports:
      - '${DB_PORT:-5432}:5432'
    networks:
      - api
  redis:
    image: redis
    ports:
      - ${REDIS_PORT:-0}:6379
    networks:
      - api
  azurite:
    image: mcr.microsoft.com/azurestorage-azurite:2.6.7
    ports:
      - ${AZURE_BLOB_PORT:-10000}:10000
    volumes:
      - azurite_data:/opt/azurite/folder
    environment:
      executable: blob
    networks:
      - api


volumes:
  rubygems_cache:
  azurite_data:
networks:
  api:
